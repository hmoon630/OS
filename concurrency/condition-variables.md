# 컨디션 변수

쓰레드가 실행을 계속 하기 전에 특정 **조건**의 만족여부를 검사해야 할 경우가 많이 있다. 부모 쓰레드가 자식 쓰레드가 작업을 끝냈는지 확인해야 하는 경우가 있다. 이 과정을 join()이라 부르는데, 이러한 대기 과정을 어떻게 구현할까?

# 컨디션 변수의 개념과 관련 루틴

쓰레드 실행 시, 특정 조건이 만족될 떄까지의 대기를 위해 **컨디션 변수(conditional variable)** 라고 불리는 개념을 사용할 수 있다. 컨디션 변수는 일종의 큐 자료구조로, 어떤 상태가 원하는 것과 다를때 조건이 만족되기를 **대기**하는 큐이다.

# 컨디션 변수 사용 시 주의 사항

- **슬립에서 깨어난 프로세스는 리턴하기 전에 락을 재획득 해야한다.**
- 컨디션 변수를 체크할 떄에는 if문이 아닌 **while문**을 사용해야 한다. 거짓으로 깨운 것일 수 있다.
- 어떤 쓰레드를 깨울 지 결정하기 위해 1개의 컨디션 변수만을 공유해서는 안된다. 용도에 맞게 여러 개를 사용하는 것이 좋다.
- 깨울 대상을 정할 때 별도의 조건 확인이 필요한 경우 broadcast를 이용하여 모두를 깨울 수 있다. 하지만 이는 수많은 문맥교환이 일어날 수 있다.
